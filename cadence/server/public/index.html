<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>Cadence Radio | A Rhythmic Experience</title>

        <meta name="description" content="A Rhythmic Experience">

        <meta property="og:url" content="https://cadenceradio.com">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Cadence Radio ♥">
        
        <meta name="twitter:card" content="summary_large_image">
        <meta property="twitter:domain" content="cadenceradio.com">
        <meta property="twitter:url" content="https://cadenceradio.com">
        <meta name="twitter:title" content="Cadence Radio ♥">

        <link rel="icon" type="image/x-icon" href="/static/favicon.ico">

        <!-- Bulma CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300&family=Rock+Salt&display=swap" rel="stylesheet"> 

        <link rel="stylesheet" href="./css/5.0.css">
        <!-- <link rel="stylesheet" href="./css/5.0tabs.css">
        <link rel="stylesheet" href="./css/5.0mq.css"> -->


        <!-- HTMX JS
        <script src="https://unpkg.com/htmx.org@1.7.0"></script> -->
        <!-- HTMX JS -->
        <!-- <link rel="stylesheet" href="/css/base.css"> -->

        <!--
        <link rel="stylesheet" href="." id="themeStylesheet">
        <link rel="stylesheet" id="moduleRequestButton" href="/css/modules/requestButtonEnabled.css">
        <link rel="stylesheet" href="/css/modules/themeButton.css"> -->

        <!-- jQuery Google CDN -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>        
        <!-- Theme changer scripts -->
        <!-- <script type="text/javascript" src="/js/themeMetadata.js"></script>
        <script type="text/javascript" src="/js/themeChanger.js"></script> -->
        <!-- API (Aria) scripts -->
        <script type="text/javascript" src="./js/aria.js"></script>
        <!-- Radio player scripts -->
        <script type="text/javascript" src="./js/page.js"></script>


        <!-- 5.0 new -->
        <!-- <script type="text/javascript" src="./js/5.0.js"></script> -->
    </head>
    <body>
        <div id="player" class="columns is-centered is-vcentered box">
            <div class="column is-narrow is-offset-1-desktop is-4-desktop-only">
                <div id="artworkcontainer">
                    <img id="artwork" src=""/>
                </div>
            </div>
            <div class="column" id="playerinfo">
                <audio id="stream" src="" type="audio/mp3"></audio>
                <div id="song">-</div>
                <div id="artist">-</div>
                <div id="playButton">►</div>
                <input type="range" id="volume" value=".3" min="0" max=".8" step="0.006" class="block" >
                <div id="status">Disconnected from server.</div>
                <div id="version" class="block">Current Listeners: <span id="listeners">-</span></div>
            </div>
        </div>
        
        <div id="tabs" class="tabs is-centered is-boxed">
            <ul>
            <li data-tab="about" class="is-active"><a>About</a></li>
              <li data-tab="request"><a>Request</a></li>
              <li data-tab="theme"><a>Theme</a></li>
              <li data-tab="api"><a>API</a></li>
            </ul>
        </div>

        <div id="tab-content">
            <section data-content="about" class="content is-active">
                <p><b>Cadence</b> is a fully-featured web radio application suite. It ships everything needed to run an internet radio station. The project is multi-component and features:</p>
                <ol>
                    <li>an API server providing music search, song request, now playing data, and artwork functionality.</li>
                    <li>an interactive web frontend with a UI theme changer.</li>
                    <li>a built-in, auto-populating music metadata database.</li>
                    <li>custom <i>Icecast</i> and <i>Liquidsoap</i> integration</li>
                    <li>containerization of all components and support for deployment to Kubernetes cluster infrastructure.</li>
                </ol>
                <p>The current iteration, <code>5.x</code>, is currently under development.</p>
            </section>
            <section data-content="request" class="content">
                <p>Submit a song request to enter the play queue.</p>

                <input name="searchInput" id="searchInput" class="input is-medium" type="text" placeholder="Filter for a song or artist!">
                <!-- <button id="searchButton">Filter</button> -->
                <div id="requestStatus"></div>
                <div id="searchResults"></div>
            </section>
            <section data-content="theme">
                <p>Coming soon.</p>
                <!-- <div class="tag block">Light</div>
                <div class="buttons has-addons">
                    <button type="button is-white" class="button themeButton" id="Default">Default</button>
                </div>
                <div class="tag is-black block">Dark</div>
                <div class="buttons has-addons">
                    <button type="button" class="button is-dark themeButton" id="RCB40">RCB40</button>
                    <button type="button" class="button is-black themeButton" id="No2TypeB">No. 2 Type B</button>
                </div> -->
            </section>
            <section data-content="api" class="content">
                <p>All requests, responses, and messages shall be transmitted as raw JSON.</p>
                <div class="columns">
                    <div class="column">
                        <h2 class="title is-3"><span class="tag is-success block">Stable</span> POST /api/search</h2>
                        <p>Search the server's music library for any song or artist. Cadence additionally is aware of audio file metadata for album, year, and genre, meaning you may also try to search by any of those parameters.</p>
                        <p>This API call returns a list of results ordered by relevance.</p>
                        <h3 class="title is-6">Request</h3>
                        <code>{ "search": "railgun" }</code>
                        <h3 class="title is-6">Response</h3>
                        <code>[ { "ID": "1", "Artist": "fripSide", "Title": "only my railgun"}, ...]</code>
        
                        <hr/>
        
                        <h2 class="title is-3"><span class="tag is-success block">Stable</span> POST /api/request/id</h2>
                        <p>Submit a request for a specific song to be played. This call accepts a song ID, which is an impermanent label Cadence applies to each song and is not an inherent attribute of the song file itself. Therefore, you should execute a search for an ID as a prerequisite to request.</p>
                        <h3 class="title is-6">Request</h3>
                        <code>{ "ID": "1", "Token", "abcdefghijk" }</code>
                        <ul>
                            <li><code>"Token"</code> is an optional string provided by the radio administrator which allows the requesting entity to bypass any rate limiters enabled on Cadence.</li>
                        </ul>
                        <h3 class="title is-6">Response</h3>
                        <code>{ "Message": "Request accepted!", "TimeRemaining": 300 }</code>
        
                        <hr/>
        
                        <h2 class="title is-3"><span class="tag is-danger block">Experimental</span> POST /api/request/bestmatch</h2>
                        <p>In contrast to <code>/api/request/id</code>, this call essentially executes a search, selects the number one result (the most relevant result to the search), and submits a request for it.</p>

                        <h3 class="title is-6">Request</h3>
                        <code>{ "Search": "only my railgun fripSide", "Token", "abcdefghijk"  }</code>
                        <ul>
                            <li><code>"Token"</code> is an optional string provided by the radio administrator which allows the requesting entity to bypass any rate limiters enabled on Cadence.</li>
                        </ul>
                        <h3 class="title is-6">Response</h3>
                        <code>{ "Message": "Request accepted!", "TimeRemaining": 300 }</code>
        
                        <hr/>
                    </div>
                    <div class="column">
                        <h2 class="title is-3"><span class="tag is-success block">Stable</span> GET /api/nowplaying/metadata</h2>
                        <p>Gets all text metadata on the currently playing song.</p>
                        <p>Does not return album art. To get album art, use <code>/api/nowplaying/albumart</code></p>
                        <h3 class="title is-6">Response</h3>
                        <code>
                        { 
                            "ID": 1, 
                            "Artist": "fripSide", 
                            "Title": "only my railgun", 
                            "Album": "only my railgun - Single", 
                            "Genre": "J-Pop", 
                            "Year": 2009 
                        }
                        </code>

                        <hr/>
                        
                        <h2 class="title is-3"><span class="tag is-success block">Stable</span> GET /api/nowplaying/albumart</h2>
                        <p>Gets the base64-encoded album art of the currently playing song.</p>
                        <h3 class="title is-6">Response</h3>
                        <code>
                        { 
                            "Picture": "(base64 encoding of album art)" 
                        }
                        </code>

                        <hr/>
                        is-warning
                        <h2 class="title is-3"><span class="tag is-success block">Stable</span> GET /api/version</h2>
                        <p>Returns the server version.</p>
                        <h3 class="title is-6">Response</h3>
                        <code>{ "Version": "5.0.0" }</code>

                        <hr/>

                        <h2 class="title is-3"><span class="tag is-danger block">Experimental</span> WS GET /socket/radiodata</h2>
                        <p>When a connection is established, the server will continue to push data to the client as it changes on the backend. The data is updated within two seconds after a change is observed. All data transfer happens through only one socket and is differentiated by the three unique <code>Type</code>s.</p>
                        <p>As an example, if the playing song changes, all connected clients receive a <code>Type: "NowPlaying"</code> message from the server.</p>
                        <h3 class="title is-6">Messages</h4>
                        <div><code>{ "Type": "NowPlaying", "Artist": "fripSide", "Title": "only my railgun" }</code></div>
                        <div><code>{ "Type": "Listeners", "Listeners": 2 }</code></div>
                        <div><code>{ "Type": "StreamConnection", "Host": "stream.cadenceradio.com", "Mountpoint": "/cadence1" }</code></div>
                    </div>
                </div>
            </section>
        </div>
        <footer>
            <div class="title rocksalt is-3">CADENCE</div>
            <div>Version: <span id="release">-</span></div>
            <div>Created by <a href="https://kenellorando.com">Ken Ellorando</a></div>
        </footer>
    </body>
</html>
